/* ============================================================================
   styles/intent/IntentControlSelect.css
   IntentControlSelect
   - Stable hooks only
   - Popover should NOT be transparent by default
============================================================================ */

/* ============================================================================
   Root
============================================================================ */

.intent-control.intent-control-select {
    position: relative;
    min-width: 0;
    overflow: visible;
}

/* fullWidth is handled by class on root in TSX */
.intent-control.intent-control-select.w-full {
    width: 100%;
}

/* ============================================================================
   Trigger
============================================================================ */

.intent-control.intent-control-select .intent-control-select-trigger {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: space-between;

    width: 100%;
    min-width: 0;

    border-radius: var(--ids-radius-2xl, 1.25rem);

    /* paint comes from resolver helpers (.intent-bg/.intent-ring/.intent-text) */
    background: transparent;
    border: 0;
    color: inherit;

    transition:
        border-color 160ms ease,
        box-shadow 160ms ease,
        color 160ms ease,
        transform 80ms ease;

    user-select: none;
}

/* intent-bg should win (same pattern as button/link) */
.intent-control.intent-control-select .intent-control-select-trigger.intent-bg {
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

/* Baseline edge when there is no intent-ring */
.intent-control.intent-control-select .intent-control-select-trigger:not(.intent-ring) {
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--intent-border) 22%, transparent);
}

/* Kill baseline in flat + ghost */
.intent-control.intent-control-select[data-variant="flat"]
    .intent-control-select-trigger:not(.intent-ring),
.intent-control.intent-control-select[data-variant="ghost"]
    .intent-control-select-trigger:not(.intent-ring) {
    box-shadow: none;
}

/* Hover polish */
.intent-control.intent-control-select:not(.is-disabled)
    .intent-control-select-trigger:hover:not(.intent-ring) {
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--intent-border) 38%, transparent);
}

.intent-control.intent-control-select .intent-control-select-trigger:focus {
    outline: none;
}

.intent-control.intent-control-select .intent-control-select-trigger:focus-visible {
    box-shadow:
        0 0 0 1px color-mix(in oklab, var(--intent-focus, var(--intent-border)) 70%, transparent),
        0 0 0 4px color-mix(in oklab, var(--intent-focus, var(--intent-border)) 25%, transparent);
}

.intent-control.intent-control-select:not(.is-disabled) .intent-control-select-trigger:active {
    transform: translateY(1px);
}

.intent-control.intent-control-select.is-disabled .intent-control-select-trigger,
.intent-control.intent-control-select .intent-control-select-trigger:disabled {
    opacity: 0.55;
    cursor: not-allowed;
}

/* Empty value */
.intent-control.intent-control-select.is-empty .intent-control-value {
    opacity: 0.55;
}

/* ============================================================================
   Trigger content
============================================================================ */

.intent-control.intent-control-select .intent-control-value {
    flex: 1 1 auto;
    min-width: 0;

    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    opacity: 0.92;
}

.intent-control.intent-control-select .intent-control-chevron {
    flex: 0 0 auto;
    opacity: 0.75;

    transition:
        transform 160ms ease,
        opacity 160ms ease;
}

.intent-control.intent-control-select.is-open .intent-control-chevron {
    transform: rotate(180deg);
    opacity: 0.9;
}

/* ============================================================================
   Sizes (size hook is on ROOT)
============================================================================ */

.intent-control.intent-control-select.ids-select-xs .intent-control-select-trigger {
    padding: 0.45rem 0.7rem;
    font-size: 0.75rem;
}

.intent-control.intent-control-select.ids-select-sm .intent-control-select-trigger {
    padding: 0.55rem 0.8rem;
    font-size: 0.8125rem;
}

.intent-control.intent-control-select.ids-select-md .intent-control-select-trigger {
    padding: 0.65rem 0.9rem;
    font-size: 0.875rem;
}

.intent-control.intent-control-select.ids-select-lg .intent-control-select-trigger {
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
}

.intent-control.intent-control-select.ids-select-xl .intent-control-select-trigger {
    padding: 0.85rem 1.1rem;
    font-size: 1rem;
}

/* ============================================================================
   Glow layers (inside trigger)
   - Only positioning here; actual visuals in shared glow CSS
============================================================================ */

.intent-control.intent-control-select .intent-glow-layer {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
}

/* ============================================================================
   Popover
============================================================================ */

.intent-control.intent-control-select .intent-control-popover {
    position: absolute;
    top: calc(100% + 0.5rem);
    z-index: 50;

    min-width: 100%;
    max-width: 100%;

    border-radius: var(--ids-radius-2xl, 1.25rem);

    /* IMPORTANT: not transparent by default */
    background-color: transparent;
    /* background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%)
    ); */

    color: var(--intent-ink);

    overflow: hidden;

    box-shadow:
        0 20px 50px rgba(0, 0, 0, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.06),
        var(--intent-ring-shadow, none),
        var(--intent-elev-shadow, none);
}

.intent-control.intent-control-select .intent-control-popover::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;

    /* Dark mode default */
    background-color: color-mix(in oklab, black 88%, var(--intent-bg, black) 12%);
}

.intent-control.intent-control-select .intent-control-popover::before {
    backdrop-filter: saturate(1.05);
}

.intent-control.intent-control-select .intent-control-popover > * {
    position: relative;
    z-index: 1;
}

.intent-control.intent-control-select[data-mode="light"] .intent-control-popover::before {
    background-color: color-mix(in oklab, white 92%, var(--intent-bg, white) 8%);
}

/* alignment hooks on ROOT */
.intent-control.intent-control-select.ids-popover-align-start .intent-control-popover {
    left: 0;
}

.intent-control.intent-control-select.ids-popover-align-end .intent-control-popover {
    right: 0;
}

/* Optional: if you still want intent-bg to override popover fill explicitly */
.intent-control.intent-control-select .intent-control-popover.intent-bg {
    /* background-color: color-mix(in oklab, var(--intent-bg) 85%, black 15%); */
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

/* Glow inside popover (positioning only) */
.intent-control.intent-control-select .intent-control-popover .intent-glow-layer {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
}

/* Light mode tweaks */
.intent-control.intent-control-select[data-mode="light"] .intent-control-popover {
    background-color: color-mix(in oklab, var(--intent-bg) 92%, white 8%);
    box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.12),
        0 0 0 1px rgba(0, 0, 0, 0.08),
        var(--intent-ring-shadow, none),
        var(--intent-elev-shadow, none);
}

/* ============================================================================
   Listbox
============================================================================ */

.intent-control.intent-control-select .intent-control-listbox {
    max-height: 16rem;
    overflow: auto;

    overscroll-behavior: contain;

    padding: 0.25rem;
    margin: 0;

    list-style: none;
    outline: none;
}

/* ============================================================================
   Options
============================================================================ */

.intent-control.intent-control-select .intent-control-option {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 0.75rem;

    padding: 0.6rem 0.75rem;
    border-radius: 0.9rem;

    cursor: pointer;
    user-select: none;

    transition:
        background 120ms ease,
        opacity 120ms ease;
}

.intent-control.intent-control-select .intent-control-option:not(.is-option-disabled):hover {
    background: rgba(255, 255, 255, 0.06);
}

.intent-control.intent-control-select .intent-control-option.is-highlighted {
    background: rgba(255, 255, 255, 0.1);
}

.intent-control.intent-control-select .intent-control-option.is-selected {
    background: rgba(255, 255, 255, 0.08);
}

.intent-control.intent-control-select .intent-control-option.is-option-disabled {
    opacity: 0.45;
    cursor: not-allowed;
}

.intent-control.intent-control-select .intent-control-option-label {
    display: block;
    line-height: 1.2;
}

.intent-control.intent-control-select .intent-control-option-description {
    display: block;
    margin-top: 0.2rem;

    font-size: 0.8125em;
    opacity: 0.7;
}

/* Light mode option hovers */
.intent-control.intent-control-select[data-mode="light"]
    .intent-control-option:not(.is-option-disabled):hover {
    background: rgba(0, 0, 0, 0.05);
}

.intent-control.intent-control-select[data-mode="light"] .intent-control-option.is-highlighted {
    background: rgba(0, 0, 0, 0.08);
}
