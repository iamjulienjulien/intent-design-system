/* ============================================================================
   styles/intent.css
   Intent Design System – Runtime CSS (hybrid mode C)
============================================================================ */

/* ============================================================================
   0) Shared primitives (helpers used by multiple components)
============================================================================ */

/* Background fill (used by surfaces + controls when they include .intent-bg) */
.intent-bg {
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

/* Ink / text color (hook name aligned with your classHooks: intent-ink) */
.intent-ink {
    color: var(--intent-ink);
}

/* Border color (if you use it as a helper hook) */
.intent-border {
    border-color: var(--intent-border);
}

/* Ring (outlined + elevated) */
.intent-ring {
    --intent-ring-shadow: 0 0 0 2px
        color-mix(
            in oklab,
            var(--intent-ring) calc(var(--intent-ring-opacity, 1) * 100%),
            transparent
        );

    outline: 2px solid
        color-mix(
            in oklab,
            var(--intent-ring) calc(var(--intent-ring-opacity, 1) * 100%),
            transparent
        );
    outline-offset: 0;
}

/* Shadow token (elevated) */
.intent-shadow-soft {
    --intent-elev-shadow: 0 10px 30px rgb(0 0 0 / 0.08);
}

/* Glow layers (shared by Surface + Controls + Indicator) */
.intent-glow-layer {
    pointer-events: none;
    position: absolute;
    inset: 0;

    background-repeat: no-repeat;
    background-image: var(--intent-glow-bg);

    opacity: var(--intent-glow-opacity, 0);
    filter: var(--intent-glow-filter, none);

    will-change: opacity, filter;
}

.intent-glow-fill {
    --intent-glow-opacity: var(--intent-glow-fill-opacity);
    filter: saturate(1.08) brightness(1.04);
}

.intent-glow-border {
    --intent-glow-opacity: var(--intent-glow-border-opacity);
    filter: saturate(1.12) brightness(1.18);

    padding: 2px;

    -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;

    mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
    mask-composite: exclude;
}

.intent-text {
    /* Primary resolved text color (from resolveIntent) */
    color: var(--intent-text, oklch(from rgb(var(--ids-ink)) l c h));

    /* Optional opacity hook */
    /* opacity: var(--intent-text-opacity, 1); */

    /* Better text rendering */
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
}

/* Optional: nicer defaults when consumer doesn't set radius explicitly */
.rounded-ids-2xl {
    border-radius: 1rem !important;
}

/* ============================================================================
   1) IntentSurface
============================================================================ */

.intent-surface {
    position: relative;
    overflow: hidden;

    box-shadow: var(--intent-ring-shadow, none), var(--intent-elev-shadow, none);
}

/* ============================================================================
   2) Controls (shared base + internal parts)
============================================================================ */

.intent-control {
    position: relative;
    overflow: hidden;

    box-shadow: var(--intent-ring-shadow, none), var(--intent-elev-shadow, none);
}

/* Internal sub-elements (shared by button/link/indicator) */
.intent-control-label {
    display: inline-block;
}

.intent-control-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Minimal spinner (button only, but harmless globally) */
.intent-control-spinner {
    width: 1em;
    height: 1em;
    border-radius: 999px;
    border: 2px solid rgb(255 255 255 / 0.22);
    border-top-color: rgb(255 255 255 / 0.75);
    animation: ids-spin 0.8s linear infinite;
}

@keyframes ids-spin {
    to {
        transform: rotate(360deg);
    }
}

/* Focus-visible: shared halo that composes with intent ring/shadow */
.intent-control:focus {
    outline: none;
}

.intent-control:focus-visible {
    box-shadow:
        0 0 0 4px rgb(255 255 255 / 0.08),
        var(--intent-ring-shadow, none),
        var(--intent-elev-shadow, none);
}

/* ============================================================================
   2a) IntentControlButton
============================================================================ */

.intent-control-button {
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;

    border: 0;
    background: none;
    font: inherit;

    letter-spacing: -0.01em;
    user-select: none;

    border-radius: inherit;
}

.intent-control-button.is-disabled,
.intent-control-button:disabled {
    cursor: not-allowed;
}

/* If you have a reset somewhere, scope ghost explicitly */
.intent-control-button[data-variant="ghost"] {
    background-color: transparent;
}

/* Ensure intent-bg wins for controls */
.intent-control-button.intent-bg {
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

/* Hover / active */
.intent-control-button:hover:not(:disabled) {
    transform: translateY(-0.5px);
}

.intent-control-button:active:not(:disabled),
.intent-control-button.is-pressed {
    transform: translateY(0px) scale(0.99);
}

/* ============================================================================
   2b) IntentControlLink  ✅ (styles manquants ajoutés)
============================================================================ */

.intent-control-link {
    -webkit-tap-highlight-color: transparent;

    /* anchor baseline */
    text-decoration: none;
    cursor: pointer;
    user-select: none;

    /* keep the "control" feel consistent with button */
    letter-spacing: -0.01em;

    border-radius: inherit;

    /* if consumer styles anchors globally */
    color: inherit;
}

/* disabled state (aria-disabled) */
.intent-control-link.is-disabled,
.intent-control-link[aria-disabled="true"] {
    cursor: not-allowed;
    pointer-events: none; /* extra safety, component already prevents click */
    opacity: 0.65;
}

/* ghost variant stays transparent */
.intent-control-link[data-variant="ghost"] {
    background-color: transparent;
}

/* ensure intent-bg wins when present */
.intent-control-link.intent-bg {
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

/* hover/active affordance */
.intent-control-link:hover:not([aria-disabled="true"]) {
    transform: translateY(-0.5px);
    text-decoration: none;
}

.intent-control-link:active:not([aria-disabled="true"]) {
    transform: translateY(0px) scale(0.99);
}

/* focus-visible: reuse the same halo as controls base */
.intent-control-link:focus {
    outline: none;
}

.intent-control-link:focus-visible {
    box-shadow:
        0 0 0 4px rgb(255 255 255 / 0.08),
        var(--intent-ring-shadow, none),
        var(--intent-elev-shadow, none);
}

/* Optional: underline only on hover if you want a more "link" vibe
.intent-control-link:hover:not([aria-disabled="true"]) .intent-control-label {
    text-decoration: underline;
    text-underline-offset: 3px;
}
*/

/* ============================================================================
   2c) Control sizing hooks (Button + Link)
============================================================================ */

.ids-btn-xs,
.ids-link-xs {
    padding: 0.45rem 0.7rem;
    font-size: 0.75rem;
    line-height: 1.05rem;
    font-weight: 600;
}

.ids-btn-sm,
.ids-link-sm {
    padding: 0.55rem 0.85rem;
    font-size: 0.8125rem;
    line-height: 1.1rem;
    font-weight: 600;
}

.ids-btn-md,
.ids-link-md {
    padding: 0.7rem 1rem;
    font-size: 0.875rem;
    line-height: 1.25rem;
    font-weight: 650;
}

.ids-btn-lg,
.ids-link-lg {
    padding: 0.85rem 1.15rem;
    font-size: 0.95rem;
    line-height: 1.35rem;
    font-weight: 650;
}

.ids-btn-xl,
.ids-link-xl {
    padding: 1rem 1.3rem;
    font-size: 1.05rem;
    line-height: 1.45rem;
    font-weight: 700;
}

/* ============================================================================
   3) IntentIndicator
============================================================================ */

.ids-indicator-xs {
    --ids-indicator-px: 8px;
    --ids-indicator-py: 4px;
    --ids-indicator-gap: 6px;
    --ids-indicator-font-size: 11px;
    --ids-indicator-line-height: 1.2;
    --ids-indicator-icon-size: 12px;
    --ids-indicator-dot-size: 6px;
}

.ids-indicator-sm {
    --ids-indicator-px: 10px;
    --ids-indicator-py: 5px;
    --ids-indicator-gap: 8px;
    --ids-indicator-font-size: 12px;
    --ids-indicator-line-height: 1.25;
    --ids-indicator-icon-size: 13px;
    --ids-indicator-dot-size: 7px;
}

.ids-indicator-md {
    --ids-indicator-px: 12px;
    --ids-indicator-py: 6px;
    --ids-indicator-gap: 8px;
    --ids-indicator-font-size: 13px;
    --ids-indicator-line-height: 1.25;
    --ids-indicator-icon-size: 14px;
    --ids-indicator-dot-size: 8px;
}

.ids-indicator-lg {
    --ids-indicator-px: 14px;
    --ids-indicator-py: 8px;
    --ids-indicator-gap: 10px;
    --ids-indicator-font-size: 14px;
    --ids-indicator-line-height: 1.3;
    --ids-indicator-icon-size: 16px;
    --ids-indicator-dot-size: 9px;
}

.intent-indicator {
    display: inline-flex;
    align-items: center;
    gap: var(--ids-indicator-gap, 8px);

    padding: var(--ids-indicator-py, 6px) var(--ids-indicator-px, 12px);

    font-size: var(--ids-indicator-font-size, 13px);
    line-height: var(--ids-indicator-line-height, 1.25);

    color: inherit;
}

.intent-indicator .intent-indicator-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--ids-indicator-icon-size, 14px);
    height: var(--ids-indicator-icon-size, 14px);
    flex: 0 0 auto;
}

.intent-indicator .intent-indicator-dot {
    width: var(--ids-indicator-dot-size, 8px);
    height: var(--ids-indicator-dot-size, 8px);
    border-radius: 9999px;

    background: color-mix(in oklab, var(--intent-accent, currentColor) 70%, transparent);
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--intent-accent, currentColor) 28%, transparent);

    flex: 0 0 auto;
}

/* ============================================================================
   4) IntentDivider
============================================================================ */

.intent-control.intent-divider {
    --ids-divider-color: var(--intent-border, rgba(255, 255, 255, 0.18));
    --ids-divider-opacity: 0.55;

    --ids-divider-thickness: 1px;
    --ids-divider-gap: 0.75rem;
    --ids-divider-label-pad-x: 0.5rem;

    position: relative;
    min-width: 0;
}

.intent-control.intent-divider.intent-divider-horizontal {
    width: 100%;
}

.intent-control.intent-divider.intent-divider-vertical {
    height: 100%;
}

/* Thickness presets */
.intent-control.intent-divider.ids-divider-hairline {
    --ids-divider-thickness: 1px;
}
.intent-control.intent-divider.ids-divider-thin {
    --ids-divider-thickness: 2px;
}
.intent-control.intent-divider.ids-divider-medium {
    --ids-divider-thickness: 3px;
}

/* Gap presets */
.intent-control.intent-divider.ids-divider-gap-xs {
    --ids-divider-gap: 0.5rem;
}
.intent-control.intent-divider.ids-divider-gap-sm {
    --ids-divider-gap: 0.75rem;
}
.intent-control.intent-divider.ids-divider-gap-md {
    --ids-divider-gap: 1rem;
}

.intent-control.intent-divider .intent-divider-line {
    background: var(--ids-divider-color);
    opacity: var(--ids-divider-opacity);
    border-radius: 999px;
}

.intent-control.intent-divider.intent-divider-horizontal .intent-divider-line {
    height: var(--ids-divider-thickness);
}

.intent-control.intent-divider.intent-divider-vertical .intent-divider-line {
    width: var(--ids-divider-thickness);
}

.intent-control.intent-divider .intent-divider-label {
    color: var(--intent-ink, rgba(255, 255, 255, 0.85));
    opacity: 0.7;
    padding: 0 var(--ids-divider-label-pad-x);
    line-height: 1;
    user-select: none;
}

.intent-control.intent-divider.has-label {
    gap: var(--ids-divider-gap);
}

.intent-control.intent-divider.is-disabled {
    --ids-divider-opacity: 0.35;
    opacity: 0.75;
}

.intent-control.intent-divider[data-mode="light"] {
    --ids-divider-color: var(--intent-border, rgba(0, 0, 0, 0.18));
}

/* ============================================================================
   IntentControlToggle
============================================================================ */

.intent-control-toggle {
    /* Size tokens (defaults: md) */
    --ids-toggle-track-w: 44px;
    --ids-toggle-track-h: 26px;
    --ids-toggle-thumb: 20px;
    --ids-toggle-pad: 3px;

    --ids-toggle-gap: 10px;

    --ids-toggle-label-size: 13px;
    --ids-toggle-label-lh: 1.2;
    --ids-toggle-desc-size: 12px;
    --ids-toggle-desc-lh: 1.25;

    display: inline-flex;
    align-items: center;
    gap: var(--ids-toggle-gap);

    /* let resolveIntent provide color; keep neutral layout here */
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;

    user-select: none;
}

.intent-control-toggle.is-disabled,
.intent-control-toggle:disabled {
    cursor: not-allowed;
}

/* Focus */
.intent-control-toggle:focus {
    outline: none;
}

.intent-control-toggle:focus-visible {
    box-shadow:
        0 0 0 4px rgb(255 255 255 / 0.08),
        var(--intent-ring-shadow, none),
        var(--intent-elev-shadow, none);
}

/* Sizes */
.ids-toggle-xs {
    --ids-toggle-track-w: 34px;
    --ids-toggle-track-h: 20px;
    --ids-toggle-thumb: 16px;
    --ids-toggle-pad: 2px;

    --ids-toggle-gap: 8px;

    --ids-toggle-label-size: 12px;
    --ids-toggle-desc-size: 11px;
}

.ids-toggle-sm {
    --ids-toggle-track-w: 38px;
    --ids-toggle-track-h: 22px;
    --ids-toggle-thumb: 18px;
    --ids-toggle-pad: 2px;

    --ids-toggle-gap: 9px;

    --ids-toggle-label-size: 12.5px;
    --ids-toggle-desc-size: 11.5px;
}

.ids-toggle-md {
    /* defaults already match md */
}

.ids-toggle-lg {
    --ids-toggle-track-w: 52px;
    --ids-toggle-track-h: 30px;
    --ids-toggle-thumb: 24px;
    --ids-toggle-pad: 3px;

    --ids-toggle-gap: 12px;

    --ids-toggle-label-size: 14px;
    --ids-toggle-desc-size: 12.5px;
}

/* Track */
.intent-control-toggle .intent-toggle-track {
    position: relative;
    display: inline-flex;
    align-items: center;

    width: var(--ids-toggle-track-w);
    height: var(--ids-toggle-track-h);
    padding: var(--ids-toggle-pad);

    border-radius: 999px;

    /* neutral track, then “on” uses accent */
    background: color-mix(in oklab, rgb(255 255 255 / 0.1), transparent);
    box-shadow: inset 0 0 0 1px color-mix(in oklab, rgb(255 255 255 / 0.1), transparent);

    transition:
        background 160ms ease,
        box-shadow 160ms ease;
}

/* Checked track */
.intent-control-toggle.is-checked .intent-toggle-track {
    background: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 0.2) * 100%),
        rgb(255 255 255 / 0.06)
    );

    box-shadow: inset 0 0 0 1px
        color-mix(
            in oklab,
            var(--intent-ring) calc(var(--intent-ring-opacity, 0.22) * 100%),
            transparent
        );
}

/* Thumb */
.intent-control-toggle .intent-toggle-thumb {
    width: var(--ids-toggle-thumb);
    height: var(--ids-toggle-thumb);

    border-radius: 999px;

    background: color-mix(in oklab, rgb(255 255 255 / 0.92), transparent);
    box-shadow:
        0 10px 18px rgb(0 0 0 / 0.28),
        0 0 0 1px rgb(255 255 255 / 0.1);

    transform: translateX(0);
    transition:
        transform 160ms ease,
        background 160ms ease,
        box-shadow 160ms ease;

    will-change: transform;
}

/* Move thumb when checked */
.intent-control-toggle.is-checked .intent-toggle-thumb {
    transform: translateX(
        calc(var(--ids-toggle-track-w) - var(--ids-toggle-thumb) - (var(--ids-toggle-pad) * 2))
    );

    background: color-mix(in oklab, rgb(255 255 255 / 0.96), transparent);
}

/* Text */
.intent-control-toggle .intent-toggle-text {
    display: inline-flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
    text-align: left;
}

.intent-control-toggle .intent-toggle-label {
    font-size: var(--ids-toggle-label-size);
    line-height: var(--ids-toggle-label-lh);
    opacity: 0.92;
}

.intent-control-toggle .intent-toggle-description {
    font-size: var(--ids-toggle-desc-size);
    line-height: var(--ids-toggle-desc-lh);
    opacity: 0.6;
}

/* Disabled polish */
.intent-control-toggle.is-disabled .intent-toggle-track,
.intent-control-toggle:disabled .intent-toggle-track {
    opacity: 0.7;
}

.intent-control-toggle.is-disabled .intent-toggle-thumb,
.intent-control-toggle:disabled .intent-toggle-thumb {
    opacity: 0.85;
}

/* ============================================================================
   Intent DS – IntentControlTabs
   - Stable hooks only (no dynamic Tailwind)
   - Uses resolver vars:
     --intent-bg, --intent-bg-opacity, --intent-text, --intent-ring, --intent-ring-opacity
     --intent-glow-bg, --intent-glow-filter (if your glow layers use them)
============================================================================ */

/* Root */
.intent-control-tabs {
    position: relative;
    isolation: isolate;
}

/* Layout wrapper */
.intent-tabs-list {
    width: 100%;
    gap: 0.25rem;
    padding: 0.25rem;
}

/* If vertical, make it feel like a stack */
.intent-control-tabs.is-vertical .intent-tabs-list {
    gap: 0.25rem;
}

/* Trigger base */
.intent-tabs-trigger {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;

    min-width: 0;
    border-radius: calc(var(--r-xl, 1.25rem) - 0.25rem);
    padding: 0.5rem 0.75rem;

    user-select: none;
    white-space: nowrap;

    background: transparent;
    color: var(--intent-text);

    border: 1px solid transparent;

    opacity: 0.85;

    transition:
        transform 120ms ease,
        opacity 160ms ease,
        background 180ms ease,
        border-color 180ms ease,
        box-shadow 180ms ease;
}

/* Label truncation */
.intent-tabs-label {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Icons */
.intent-tabs-icon-left,
.intent-tabs-icon-right {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    opacity: 0.8;
    flex: none;
}

/* Hover */
.intent-tabs-trigger:hover {
    opacity: 0.95;
    background: color-mix(in oklab, var(--intent-bg) 10%, transparent);
}

/* Active tab */
.intent-tabs-trigger.is-active {
    opacity: 1;
    background: color-mix(in oklab, var(--intent-bg) 16%, transparent);
    border-color: color-mix(in oklab, var(--intent-ring) 42%, transparent);
    box-shadow: 0 10px 28px rgb(0 0 0 / 0.24);
}

/* Press */
.intent-tabs-trigger:active {
    transform: translateY(0.5px);
}

/* Focus */
.intent-tabs-trigger:focus-visible {
    outline: none;
    box-shadow:
        0 0 0 2px color-mix(in oklab, var(--intent-ring) 38%, transparent),
        0 0 0 6px color-mix(in oklab, var(--intent-ring) 14%, transparent);
    opacity: 1;
}

/* Disabled */
.intent-control-tabs.is-disabled,
.intent-control-tabs.is-readonly {
    opacity: 0.95;
}

.intent-tabs-trigger.is-disabled {
    opacity: 0.45;
    pointer-events: none;
}

/* Readonly: keep crisp, but no clicks */
.intent-control-tabs.is-readonly .intent-tabs-trigger {
    cursor: default;
}

/* Equal segmented */
.intent-control-tabs.is-equal .intent-tabs-trigger {
    flex: 1 1 0%;
}

/* Orientation helpers */
.intent-control-tabs.is-horizontal .intent-tabs-list {
    display: inline-flex;
    align-items: center;
}

.intent-control-tabs.is-vertical .intent-tabs-list {
    display: flex;
    flex-direction: column;
}

/* ============================================================================
   Size hooks (CSS owns actual px)
============================================================================ */

.ids-tabs-xs .intent-tabs-list {
    padding: 0.2rem;
    gap: 0.2rem;
}
.ids-tabs-xs .intent-tabs-trigger {
    padding: 0.35rem 0.55rem;
    font-size: 0.75rem;
    letter-spacing: 0.01em;
}

.ids-tabs-sm .intent-tabs-trigger {
    padding: 0.42rem 0.65rem;
    font-size: 0.8125rem;
}

.ids-tabs-md .intent-tabs-trigger {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
}

.ids-tabs-lg .intent-tabs-trigger {
    padding: 0.6rem 0.9rem;
    font-size: 0.95rem;
}

/* ============================================================================
   Optional: slightly different feel in ghost variant
   (Your resolver may already suppress bg/ring for ghost. This is just polish.)
============================================================================ */

[data-variant="ghost"].intent-control-tabs .intent-tabs-trigger.is-active {
    background: color-mix(in oklab, var(--intent-bg) 10%, transparent);
    border-color: color-mix(in oklab, var(--intent-ring) 26%, transparent);
    box-shadow: none;
}

/* ============================================================================
   Glow layers (if you already have global glow-layer CSS elsewhere)
   Otherwise, here is a minimal fallback.
============================================================================ */

.intent-control-tabs .intent-glow-layer {
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
}

.intent-control-tabs .intent-glow-fill {
    border-radius: inherit;
    background: var(--intent-glow-bg, none);
    filter: var(--intent-glow-filter, none);
}

.intent-control-tabs .intent-glow-border {
    border: 1px solid color-mix(in oklab, var(--intent-ring) 60%, transparent);
    background: transparent;
    filter: var(--intent-glow-filter, none);
    border-radius: inherit;
}

/* ============================================================================
   IntentControlSelect (control)
   - Stable hooks only
   - Uses resolved CSS vars from resolveIntent()
============================================================================ */

/* ============================================================================
   IntentControlSelect
============================================================================ */

.intent-control.intent-control-select {
    position: relative;
    min-width: 0;
    overflow: visible;
}

/* fullWidth is handled by class on root in TSX */
.intent-control.intent-control-select.w-full {
    width: 100%;
}

/* ---------------------------------------------------------------------------
   Trigger
--------------------------------------------------------------------------- */

/* ---------------------------------------------------------------------------
   Trigger (variant-driven via resolver hooks)
--------------------------------------------------------------------------- */

.intent-control.intent-control-select .intent-control-select-trigger {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    min-width: 0;

    border-radius: var(--ids-radius-2xl, 1.25rem);

    /* ✅ DO NOT FORCE PAINT:
       - background handled by `.intent-bg`
       - outline handled by `.intent-ring`
       - text handled by `.intent-text`
    */
    background: transparent;
    border: 0;
    color: inherit;

    transition:
        border-color 160ms ease,
        box-shadow 160ms ease,
        color 160ms ease,
        transform 80ms ease;

    user-select: none;
}

/* ✅ Let .intent-bg paint the trigger */
.intent-control.intent-control-select .intent-control-select-trigger {
    background: none; /* ok, n’écrase pas background-color de .intent-bg si tu ajoutes la règle ci-dessous */
}

/* ✅ Same “intent-bg wins” pattern as IntentControlButton */
.intent-control.intent-control-select .intent-control-select-trigger.intent-bg {
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

/* Optional: keep a subtle baseline border ONLY when there is no intent-ring.
   (If you want absolutely no border in flat, remove this block.) */
.intent-control.intent-control-select .intent-control-select-trigger:not(.intent-ring) {
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--intent-border) 22%, transparent);
}

/* ❌ kill the baseline border in flat + ghost */
.intent-control.intent-control-select[data-variant="flat"]
    .intent-control-select-trigger:not(.intent-ring),
.intent-control.intent-control-select[data-variant="ghost"]
    .intent-control-select-trigger:not(.intent-ring) {
    box-shadow: none;
}

/* optional: also disable the hover polish for those variants */
.intent-control.intent-control-select[data-variant="flat"]:not(.is-disabled)
    .intent-control-select-trigger:hover:not(.intent-ring),
.intent-control.intent-control-select[data-variant="ghost"]:not(.is-disabled)
    .intent-control-select-trigger:hover:not(.intent-ring) {
    box-shadow: none;
}

/* Hover polish (doesn't fight outline) */
.intent-control.intent-control-select:not(.is-disabled)
    .intent-control-select-trigger:hover:not(.intent-ring) {
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--intent-border) 38%, transparent);
}

.intent-control.intent-control-select .intent-control-select-trigger:focus {
    outline: none;
}

.intent-control.intent-control-select .intent-control-select-trigger:focus-visible {
    box-shadow:
        0 0 0 1px color-mix(in oklab, var(--intent-focus, var(--intent-border)) 70%, transparent),
        0 0 0 4px color-mix(in oklab, var(--intent-focus, var(--intent-border)) 25%, transparent);
}

.intent-control.intent-control-select:not(.is-disabled) .intent-control-select-trigger:hover {
    border-color: color-mix(in oklab, var(--intent-border) 80%, var(--intent-ink) 20%);
}

.intent-control.intent-control-select:not(.is-disabled) .intent-control-select-trigger:active {
    transform: translateY(1px);
}

.intent-control.intent-control-select.is-disabled .intent-control-select-trigger,
.intent-control.intent-control-select .intent-control-select-trigger:disabled {
    opacity: 0.55;
    cursor: not-allowed;
}

.intent-control.intent-control-select.is-empty .intent-control-value {
    opacity: 0.55;
}

/* Sizes: size hook is on ROOT */
.intent-control.intent-control-select.ids-select-xs .intent-control-select-trigger {
    padding: 0.45rem 0.7rem;
    font-size: 0.75rem;
}
.intent-control.intent-control-select.ids-select-sm .intent-control-select-trigger {
    padding: 0.55rem 0.8rem;
    font-size: 0.8125rem;
}
.intent-control.intent-control-select.ids-select-md .intent-control-select-trigger {
    padding: 0.65rem 0.9rem;
    font-size: 0.875rem;
}
.intent-control.intent-control-select.ids-select-lg .intent-control-select-trigger {
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
}
.intent-control.intent-control-select.ids-select-xl .intent-control-select-trigger {
    padding: 0.85rem 1.1rem;
    font-size: 1rem;
}

.intent-control.intent-control-select .intent-control-value {
    flex: 1 1 auto;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    opacity: 0.92;
}

.intent-control.intent-control-select .intent-control-chevron {
    flex: 0 0 auto;
    opacity: 0.75;
    transition:
        transform 160ms ease,
        opacity 160ms ease;
}

.intent-control.intent-control-select.is-open .intent-control-chevron {
    transform: rotate(180deg);
    opacity: 0.9;
}

/* ---------------------------------------------------------------------------
   Glow layers (inside trigger)
--------------------------------------------------------------------------- */

.intent-control.intent-control-select .intent-glow-layer {
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    pointer-events: none;
}

.intent-control.intent-control-select .intent-glow-layer {
    inset: 0; /* ou -2px si tu veux que ça déborde */
    border-radius: inherit;
}
/* ---------------------------------------------------------------------------
   Popover
   - now positioned by CSS (absolute + anchor under trigger)
--------------------------------------------------------------------------- */

.intent-control.intent-control-select .intent-control-popover {
    position: absolute;
    top: calc(100% + 0.5rem);
    z-index: 50;

    min-width: 100%;
    max-width: 100%;

    border-radius: var(--ids-radius-2xl, 1.25rem);

    /* ✅ let resolver paint:
       - fill via .intent-bg
       - outline via .intent-ring (outlined/elevated)
       - shadow via .intent-shadow-soft (elevated)
       - text via .intent-text
    */
    background: none;
    color: inherit;

    overflow: hidden;

    /* ✅ keep the "popover depth" without fighting resolver */
    box-shadow:
        0 20px 50px rgba(0, 0, 0, 0.35),
        var(--intent-ring-shadow, none),
        var(--intent-elev-shadow, none);
}

/* Optional: if variant is flat/ghost, you may still want a subtle container edge */
.intent-control.intent-control-select[data-variant="flat"]
    .intent-control-popover:not(.intent-ring),
.intent-control.intent-control-select[data-variant="ghost"]
    .intent-control-popover:not(.intent-ring) {
    box-shadow:
        0 20px 50px rgba(0, 0, 0, 0.35),
        inset 0 0 0 1px color-mix(in oklab, var(--intent-border) 22%, transparent);
}

/* alignment hooks on ROOT */
.intent-control.intent-control-select.ids-popover-align-start .intent-control-popover {
    left: 0;
}
.intent-control.intent-control-select.ids-popover-align-end .intent-control-popover {
    right: 0;
}

.intent-control.intent-control-select .intent-control-popover.intent-bg {
    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 1) * 100%),
        transparent
    );
}

.intent-control.intent-control-select .intent-control-popover .intent-glow-layer {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
}

/* listbox */
.intent-control.intent-control-select .intent-control-listbox {
    max-height: 16rem;
    overflow: auto;
    overscroll-behavior: contain;
    padding: 0.25rem;
    margin: 0;
    list-style: none;
    outline: none;
}

/* option */
.intent-control.intent-control-select .intent-control-option {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 0.75rem;

    padding: 0.6rem 0.75rem;
    border-radius: 0.9rem;

    cursor: pointer;
    user-select: none;

    transition:
        background 120ms ease,
        opacity 120ms ease;
}

.intent-control.intent-control-select .intent-control-option:not(.is-option-disabled):hover {
    background: rgba(255, 255, 255, 0.06);
}

.intent-control.intent-control-select .intent-control-option.is-highlighted {
    background: rgba(255, 255, 255, 0.1);
}

.intent-control.intent-control-select .intent-control-option.is-selected {
    background: rgba(255, 255, 255, 0.08);
}

.intent-control.intent-control-select .intent-control-option.is-option-disabled {
    opacity: 0.45;
    cursor: not-allowed;
}

.intent-control.intent-control-select .intent-control-option-label {
    display: block;
    line-height: 1.2;
}

.intent-control.intent-control-select .intent-control-option-description {
    display: block;
    margin-top: 0.2rem;
    font-size: 0.8125em;
    opacity: 0.7;
}

/* light mode tweaks based on root data-mode */
.intent-control.intent-control-select[data-mode="light"] .intent-control-popover {
    background: color-mix(in oklab, var(--intent-bg) 92%, white 8%);
    box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.12),
        0 0 0 1px rgba(0, 0, 0, 0.08);
}

.intent-control.intent-control-select[data-mode="light"]
    .intent-control-option:not(.is-option-disabled):hover {
    background: rgba(0, 0, 0, 0.05);
}

.intent-control.intent-control-select[data-mode="light"] .intent-control-option.is-highlighted {
    background: rgba(0, 0, 0, 0.08);
}

/* ============================================================================
   IntentControlField (updated)
============================================================================ */

.intent-control-field {
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
    min-width: 0;
    color: var(--intent-ink);
}

.intent-control-field.is-compact {
    gap: 0.35rem;
}

.intent-control-field-header {
    min-width: 0;
}

.intent-control-field-labelRow {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 0.75rem;
    min-width: 0;
}

.intent-control-field-label {
    font-size: 0.8125rem;
    line-height: 1.1rem;
    opacity: 0.9;
    min-width: 0;

    /* feels more "form" */
    letter-spacing: 0.005em;
}

.intent-control-field-meta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.75rem;
    opacity: 0.55;
    white-space: nowrap;
}

.intent-control-field-required {
    opacity: 0.85;
}

.intent-control-field-optional {
    opacity: 0.75;
}

/* ✅ The actual "field" look lives here */
.intent-control-field-frame {
    width: 100%;
    min-width: 0;

    display: flex;
    align-items: center;
    gap: 0.55rem;
    overflow: visible;

    /* form-field padding */
    padding: 0.7rem 0.9rem;

    border-radius: var(--ids-radius-2xl, 1.25rem);

    /* subtle baseline even in flat */
    border: 1px solid
        color-mix(
            in oklab,
            var(--intent-border) calc(var(--intent-ring-opacity, 0.18) * 100%),
            transparent
        );

    background-color: color-mix(
        in oklab,
        var(--intent-bg) calc(var(--intent-bg-opacity, 0.12) * 100%),
        transparent
    );

    transition:
        background 160ms ease,
        border-color 160ms ease,
        box-shadow 160ms ease,
        transform 120ms ease;
}

/* Compact tightens padding */
.intent-control-field.is-compact .intent-control-field-frame {
    padding: 0.55rem 0.75rem;
}

/* Focus (when an input inside is focused) */
.intent-control-field-frame:focus-within {
    border-color: color-mix(in oklab, var(--intent-ring) 58%, transparent);
    box-shadow:
        0 0 0 2px color-mix(in oklab, var(--intent-ring) 22%, transparent),
        0 0 0 6px color-mix(in oklab, var(--intent-ring) 10%, transparent),
        var(--intent-elev-shadow, none);
}

/* Hover polish */
.intent-control-field:not(.is-disabled) .intent-control-field-frame:hover {
    border-color: color-mix(in oklab, var(--intent-ring) 52%, transparent);
}

/* Invalid state */
.intent-control-field.is-invalid .intent-control-field-frame {
    border-color: color-mix(in oklab, var(--intent-ring) 70%, black 0%);
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--intent-ring) 18%, transparent);
}

/* Disabled */
.intent-control-field.is-disabled {
    opacity: 0.65;
}
.intent-control-field.is-disabled .intent-control-field-frame {
    cursor: not-allowed;
}

/* Layout */
.intent-control-field-leading,
.intent-control-field-trailing {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    opacity: 0.85;
}

.intent-control-field-control {
    flex: 1 1 auto;
    min-width: 0;
}

/* ✅ Generic styling for common controls placed as children
   (consumer can opt-in by adding these classes)
*/
.intent-control-field-input,
.intent-control-field-textarea {
    width: 100%;
    min-width: 0;

    background: transparent;
    border: 0;
    outline: none;

    color: inherit;
    font: inherit;

    padding: 0;
    margin: 0;

    opacity: 0.92;
}

.intent-control-field-input::placeholder,
.intent-control-field-textarea::placeholder {
    opacity: 0.55;
}

/* Hint / error */
.intent-control-field-hint,
.intent-control-field-error {
    font-size: 0.8125rem;
    line-height: 1.25rem;
    opacity: 0.7;
}

.intent-control-field-error {
    opacity: 0.9;
}
